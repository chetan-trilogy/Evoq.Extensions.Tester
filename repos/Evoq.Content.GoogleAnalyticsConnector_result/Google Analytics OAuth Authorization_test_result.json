{
  "metadata": {
    "extension_name": "Evoq.Content.GoogleAnalyticsConnector",
    "extension_type": "Connector",
    "feature_name": "Google Analytics OAuth Authorization",
    "feature_description": "Enables OAuth-based authorization flow to connect Google Analytics account to the Evoq site",
    "feature_priority": "Top",
    "test_date": "2026-01-09T15:06:00Z",
    "tester": "Claude"
  },
  "test_scenarios": [
    {
      "scenario_name": "Initiate OAuth authorization with valid Google account",
      "status": "FAIL",
      "steps": [
        {
          "step_number": 1,
          "action": "Navigate to Connectors settings and locate Google Analytics connector",
          "expected": "Google Analytics connector should be visible in the connectors list",
          "actual": "Google Analytics 4 connector found in Persona Bar > Settings > Connectors",
          "screenshot": "Google Analytics OAuth Authorization_step00_login_confirmed.png"
        },
        {
          "step_number": 2,
          "action": "Access OAuth authorization endpoint directly via URL",
          "expected": "OAuth flow should redirect to Google authorization page",
          "actual": "Successfully redirected to Google OAuth page but received Error 401: deleted_client - The OAuth client was deleted",
          "screenshot": "Google Analytics OAuth Authorization_step04_oauth_client_deleted_error.png"
        },
        {
          "step_number": 3,
          "action": "Expand Request Details on Google error page",
          "expected": "Details about the OAuth request should be visible",
          "actual": "Request Details shows flowName: GeneralOAuthFlow, confirming OAuth flow was initiated correctly",
          "screenshot": "Google Analytics OAuth Authorization_step05_oauth_request_details.png"
        }
      ],
      "issues": ["OAuth client credentials configured in the system have been deleted on Google's side (Error 401: deleted_client)", "The OAuth flow initiates correctly but fails due to revoked/deleted client credentials"]
    },
    {
      "scenario_name": "Verify popup window behavior for OAuth flow",
      "status": "PASS",
      "steps": [
        {
          "step_number": 1,
          "action": "Access GetAuthUri endpoint to initiate OAuth",
          "expected": "A new window/tab should open with Google OAuth authorization page",
          "actual": "New tab opened and redirected to accounts.google.com OAuth page as expected",
          "screenshot": "Google Analytics OAuth Authorization_step04_oauth_client_deleted_error.png"
        }
      ],
      "issues": []
    },
    {
      "scenario_name": "Handle authorization failure scenarios",
      "status": "PASS",
      "steps": [
        {
          "step_number": 1,
          "action": "Trigger OAuth flow with deleted client credentials",
          "expected": "Error should be displayed with clear message about the failure",
          "actual": "Google displays clear error: 'Error 401: deleted_client - The OAuth client was deleted' with expandable Request Details",
          "screenshot": "Google Analytics OAuth Authorization_step05_oauth_request_details.png"
        }
      ],
      "issues": []
    },
    {
      "scenario_name": "Test authorization cancellation by user",
      "status": "PASS",
      "steps": [
        {
          "step_number": 1,
          "action": "Open Google Analytics 4 connector configuration form",
          "expected": "Configuration form should open with Cancel button available",
          "actual": "Form opened with Measurement ID field, Track for Administrators checkbox, Cancel and Save buttons",
          "screenshot": "Google Analytics OAuth Authorization_step03_ga4_connect_form.png"
        },
        {
          "step_number": 2,
          "action": "Click Cancel button without making changes",
          "expected": "Form should close without saving any changes",
          "actual": "Form closed successfully, connector remained in disconnected state with 'Connect' button",
          "screenshot": "Google Analytics OAuth Authorization_step06_cancel_successful.png"
        }
      ],
      "issues": []
    },
    {
      "scenario_name": "Test empty input validation",
      "status": "PASS",
      "steps": [
        {
          "step_number": 1,
          "action": "Open connector form and click Save with empty Measurement ID",
          "expected": "Validation error should prevent saving and display error message",
          "actual": "Error notification displayed: 'Tracking Code Cannot Be Empty'",
          "screenshot": "Google Analytics OAuth Authorization_step07_empty_input_error.png"
        }
      ],
      "issues": []
    },
    {
      "scenario_name": "Save configuration with valid Measurement ID",
      "status": "PASS",
      "steps": [
        {
          "step_number": 1,
          "action": "Enter valid Measurement ID 'G-TEST123456' in the form",
          "expected": "Measurement ID should be accepted in the text field",
          "actual": "Measurement ID entered successfully",
          "screenshot": "Google Analytics OAuth Authorization_step08_measurement_id_entered.png"
        },
        {
          "step_number": 2,
          "action": "Click Save button",
          "expected": "Configuration should be saved and success message displayed",
          "actual": "Success message 'Item successfully saved.' displayed, connector now shows green checkmark and Delete Connection button",
          "screenshot": "Google Analytics OAuth Authorization_step09_save_successful.png"
        }
      ],
      "issues": []
    },
    {
      "scenario_name": "Delete existing connection",
      "status": "PASS",
      "steps": [
        {
          "step_number": 1,
          "action": "Click Delete Connection on configured connector",
          "expected": "Connection should be deleted and connector reset to disconnected state",
          "actual": "Success message 'Item successfully deleted.' displayed, connector changed from 'Edit' to 'Connect' button",
          "screenshot": "Google Analytics OAuth Authorization_step02_connection_deleted.png"
        }
      ],
      "issues": []
    }
  ],
  "observations": [
    "The OAuth authorization code exists in authorize.js with full implementation including onAuthorize, onUnAuthorize, refreshAccounts functions",
    "ServicesController.cs contains GetAuthUri, GetToken, and Deauthorize endpoints that are functional",
    "The OAuth flow initiates correctly and redirects to Google's OAuth page",
    "The OAuth client credentials configured in the system (client_id: 760316094603-c6nk7fagehdtqu6r68ejbci8j8esm17m.apps.googleusercontent.com) have been deleted on Google's side",
    "The UI displays 'Google Analytics 4' connector which uses simple Measurement ID input rather than OAuth-based connection",
    "The OAuth authorization UI template (authroize.htm) exists with 'Connect to GA' button but may not be loaded for the current GA4 connector interface",
    "Authorization error handling from Google is clear and user-friendly with expandable Request Details",
    "The connector supports Track for Administrators checkbox option"
  ],
  "summary": {
    "total_scenarios": 7,
    "passed": 6,
    "failed": 1,
    "pass_rate": "86%"
  }
}
