{
  "metadata": {
    "extension_name": "Evoq.GoogleAnalyticsConnector",
    "extension_type": "Connector",
    "feature_name": "Segmentation Rules Management",
    "feature_description": "Create and manage custom tracking rules based on specific pages and user roles for targeted analytics.",
    "feature_priority": "High",
    "test_date": "2026-01-09T12:00:00Z",
    "tester": "Claude"
  },
  "test_scenarios": [
    {
      "scenario_name": "Access Segmentation Rules Feature",
      "status": "FAIL",
      "steps": [
        {
          "step_number": 1,
          "action": "Logged in as SuperUser and navigated to Settings > Connectors",
          "expected": "Connectors panel opens with Google Analytics connector visible",
          "actual": "Connectors panel opened successfully, Google Analytics 4 connector visible with Edit button",
          "screenshot": "Segmentation_Rules_Management_step00_login_verified.png"
        },
        {
          "step_number": 2,
          "action": "Clicked Edit on Google Analytics 4 connector",
          "expected": "Connector settings panel expands with Advanced Settings link visible",
          "actual": "Connector settings panel expanded showing only Measurement ID and Track for Administrators fields. No Advanced Settings link is present in the UI.",
          "screenshot": "Segmentation_Rules_Management_step01_ga_edit_panel.png"
        },
        {
          "step_number": 3,
          "action": "Attempted to trigger Advanced Settings by entering Universal Analytics format ID (UA-123456789-1)",
          "expected": "Advanced Settings link appears after saving UA format tracking ID",
          "actual": "After saving, the connector UI remained the same without any Advanced Settings link. The GA4 connector template does not include the advancedSetting element.",
          "screenshot": "Segmentation_Rules_Management_step02_no_advanced_settings.png"
        }
      ],
      "issues": ["The Google Analytics 4 connector in the UI does not have an Advanced Settings link. The Segmentation Rules feature exists in the codebase (connector.htm, advanced.htm, connector.js) but the UI uses a different template (txtGa4ID) that does not include the advancedSetting element."]
    },
    {
      "scenario_name": "Add new segmentation rule",
      "status": "FAIL",
      "steps": [
        {
          "step_number": 1,
          "action": "Attempted to access Add Rule functionality",
          "expected": "Add Rule link visible in Segmentation Rules section",
          "actual": "Cannot test - Segmentation Rules section is not accessible. The Advanced Settings dialog that contains Segmentation Rules cannot be opened.",
          "screenshot": "Segmentation_Rules_Management_step02_no_advanced_settings.png"
        }
      ],
      "issues": ["Feature not accessible in UI - no Advanced Settings link in Google Analytics 4 connector"]
    },
    {
      "scenario_name": "Edit existing rule",
      "status": "FAIL",
      "steps": [
        {
          "step_number": 1,
          "action": "Attempted to access Edit Rule functionality",
          "expected": "Edit button visible on existing rules",
          "actual": "Cannot test - Segmentation Rules section is not accessible",
          "screenshot": "Segmentation_Rules_Management_step02_no_advanced_settings.png"
        }
      ],
      "issues": ["Feature not accessible in UI - no Advanced Settings link in Google Analytics 4 connector"]
    },
    {
      "scenario_name": "Delete rule",
      "status": "FAIL",
      "steps": [
        {
          "step_number": 1,
          "action": "Attempted to access Delete Rule functionality",
          "expected": "Delete button visible on existing rules",
          "actual": "Cannot test - Segmentation Rules section is not accessible",
          "screenshot": "Segmentation_Rules_Management_step02_no_advanced_settings.png"
        }
      ],
      "issues": ["Feature not accessible in UI - no Advanced Settings link in Google Analytics 4 connector"]
    },
    {
      "scenario_name": "Configure rule with specific page selection",
      "status": "FAIL",
      "steps": [
        {
          "step_number": 1,
          "action": "Attempted to configure rule with page selection",
          "expected": "Page picker dropdown visible in rule configuration",
          "actual": "Cannot test - Segmentation Rules section is not accessible",
          "screenshot": "Segmentation_Rules_Management_step02_no_advanced_settings.png"
        }
      ],
      "issues": ["Feature not accessible in UI - no Advanced Settings link in Google Analytics 4 connector"]
    },
    {
      "scenario_name": "Configure rule with specific role selection",
      "status": "FAIL",
      "steps": [
        {
          "step_number": 1,
          "action": "Attempted to configure rule with role selection",
          "expected": "Role dropdown visible in rule configuration",
          "actual": "Cannot test - Segmentation Rules section is not accessible",
          "screenshot": "Segmentation_Rules_Management_step02_no_advanced_settings.png"
        }
      ],
      "issues": ["Feature not accessible in UI - no Advanced Settings link in Google Analytics 4 connector"]
    },
    {
      "scenario_name": "Configure rule with Any Page option",
      "status": "FAIL",
      "steps": [
        {
          "step_number": 1,
          "action": "Attempted to configure rule with Any Page option",
          "expected": "Any Page option available in page picker",
          "actual": "Cannot test - Segmentation Rules section is not accessible",
          "screenshot": "Segmentation_Rules_Management_step02_no_advanced_settings.png"
        }
      ],
      "issues": ["Feature not accessible in UI - no Advanced Settings link in Google Analytics 4 connector"]
    },
    {
      "scenario_name": "Configure rule with All Users role",
      "status": "FAIL",
      "steps": [
        {
          "step_number": 1,
          "action": "Attempted to configure rule with All Users role",
          "expected": "All Users option available in role dropdown",
          "actual": "Cannot test - Segmentation Rules section is not accessible",
          "screenshot": "Segmentation_Rules_Management_step02_no_advanced_settings.png"
        }
      ],
      "issues": ["Feature not accessible in UI - no Advanced Settings link in Google Analytics 4 connector"]
    },
    {
      "scenario_name": "Rule reordering (move up/down)",
      "status": "FAIL",
      "steps": [
        {
          "step_number": 1,
          "action": "Attempted to reorder rules",
          "expected": "Move up/down buttons visible on rules",
          "actual": "Cannot test - Segmentation Rules section is not accessible",
          "screenshot": "Segmentation_Rules_Management_step02_no_advanced_settings.png"
        }
      ],
      "issues": ["Feature not accessible in UI - no Advanced Settings link in Google Analytics 4 connector"]
    },
    {
      "scenario_name": "Validate maximum 5 rules limit",
      "status": "FAIL",
      "steps": [
        {
          "step_number": 1,
          "action": "Attempted to validate 5 rules limit",
          "expected": "Add Rule link hidden when 5 rules exist",
          "actual": "Cannot test - Segmentation Rules section is not accessible",
          "screenshot": "Segmentation_Rules_Management_step02_no_advanced_settings.png"
        }
      ],
      "issues": ["Feature not accessible in UI - no Advanced Settings link in Google Analytics 4 connector"]
    },
    {
      "scenario_name": "Label and value field validation (50 char max)",
      "status": "FAIL",
      "steps": [
        {
          "step_number": 1,
          "action": "Attempted to validate field character limits",
          "expected": "Label and Value fields enforce 50 character maximum",
          "actual": "Cannot test - Segmentation Rules section is not accessible",
          "screenshot": "Segmentation_Rules_Management_step02_no_advanced_settings.png"
        }
      ],
      "issues": ["Feature not accessible in UI - no Advanced Settings link in Google Analytics 4 connector"]
    }
  ],
  "observations": [
    "Code analysis confirms Segmentation Rules functionality exists in the codebase: connector.htm contains advancedSetting link, advanced.htm contains the Segmentation Rules UI, connector.js implements CRUD operations for rules",
    "The UI displays 'Google Analytics 4' connector which uses a different template (txtGa4ID input) than the legacy GoogleAnalytics connector (gaTrackingId input)",
    "The Advanced Settings link (class='advancedSetting') that opens the Segmentation Rules dialog is NOT present in the Google Analytics 4 connector template",
    "Even after entering a Universal Analytics format tracking ID (UA-123456789-1), the Advanced Settings link did not appear",
    "The legacy GoogleAnalytics connector with Segmentation Rules may have been superseded by the simplified GA4 connector, or the feature may require additional configuration or a different connector installation",
    "Backend code (GoogleAnalyticsConnector.cs, ServicesController.cs) shows the connector supports both UA and GA4 tracking IDs and has full Segmentation Rules parsing/saving logic"
  ],
  "summary": {
    "total_scenarios": 11,
    "passed": 0,
    "failed": 11,
    "pass_rate": "0%"
  }
}
