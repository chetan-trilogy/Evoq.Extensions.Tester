{
  "metadata": {
    "extension_name": "Evoq.GoogleAnalyticsConnector",
    "extension_type": "Connector",
    "feature_name": "Custom Dimensions and Variables",
    "feature_description": "Configure custom tracking dimensions and variables based on segmentation rules for enhanced analytics.",
    "feature_priority": "Medium",
    "test_date": "2026-01-09T12:00:00Z",
    "tester": "Claude"
  },
  "test_scenarios": [
    {
      "scenario_name": "Access Custom Dimensions and Variables UI",
      "status": "FAIL",
      "steps": [
        {
          "step_number": 1,
          "action": "Logged in as superuser (host/Pass123456) and navigated to Connectors page",
          "expected": "Google Analytics connector with Advanced Settings option should be available",
          "actual": "Google Analytics 4 connector is displayed with only basic settings (Measurement ID, Track for Administrators). No Advanced Settings link or Segmentation Rules UI is available.",
          "screenshot": "Custom_Dimensions_and_Variables_step01_connectors_page.png"
        },
        {
          "step_number": 2,
          "action": "Examined the Google Analytics 4 connector configuration panel",
          "expected": "Advanced Settings link/icon should be visible to access Segmentation Rules",
          "actual": "The GA4 connector form only shows: Measurement ID input field, Track for Administrators checkbox, Cancel and Save buttons. No Advanced Settings or gear icon is present.",
          "screenshot": "Custom_Dimensions_and_Variables_step02_ga4_connector_no_advanced.png"
        },
        {
          "step_number": 3,
          "action": "Used JavaScript to search for advancedSetting class or Segmentation Rules UI elements in the connector form",
          "expected": "Find UI elements for configuring custom variables/dimensions",
          "actual": "No advancedSetting, gaBase, or rule-related elements found. The deployed connector uses a simplified GA4 template from /DesktopModules/Connectors/GoogleAnalytics4/ which does not include the Segmentation Rules interface."
        }
      ],
      "issues": [
        "The deployed website uses 'Google Analytics 4' connector which has a simplified UI without Advanced Settings/Segmentation Rules",
        "The original GoogleAnalytics connector (with Segmentation Rules) templates (connector.htm, advanced.htm) are not loaded by the GA4 connector",
        "No UI access point exists to configure custom dimensions and variables in the current deployment"
      ]
    }
  ],
  "observations": [
    "CODE ANALYSIS: The Custom Dimensions and Variables feature (Segmentation Rules) exists in the repository code at: GoogleAnalyticsProEngine.cs (rendering logic with MAX_CUSTOM_VARS=5, CUSTVAR_OPT_SCOPE=3), GoogleAnalyticsConnector.cs (rule parsing/saving), advanced.htm (UI template), connector.js (JavaScript handlers)",
    "CODE FUNCTIONALITY: The code supports configuring rules with: Label, Value, Page (TabId for page-specific rules), Role (RoleId for role-specific rules). Rules are rendered as _gaq.push(['_setCustomVar',...]) for legacy GA or localStorage-based dimensions for Universal Analytics",
    "DEPLOYMENT ISSUE: The deployed website loads '/DesktopModules/Connectors/GoogleAnalytics4/scripts/connector.js' instead of the original '/DesktopModules/DnnCorp/Connectors/GoogleAnalytics/scripts/connector.js' which contains the Advanced Settings functionality",
    "UI OBSERVATION: The 'Google Analytics 4' connector displayed in the UI is a separate, simplified connector that only exposes Measurement ID and Track for Administrators settings - it does not load the connector.htm or advanced.htm templates that contain the Segmentation Rules interface",
    "FEATURE STATUS: Custom Dimensions and Variables (Segmentation Rules) feature code exists but NO UI ELEMENT was found to test it. The feature is not accessible through the current Google Analytics 4 connector interface",
    "The GA4 connector may be intentionally simplified since Google Analytics 4 has different dimension/metric handling compared to Universal Analytics"
  ],
  "summary": {
    "total_scenarios": 1,
    "passed": 0,
    "failed": 1,
    "pass_rate": "0%"
  }
}
