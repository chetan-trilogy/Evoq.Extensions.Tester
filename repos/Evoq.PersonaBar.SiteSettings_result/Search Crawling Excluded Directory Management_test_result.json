{
  "metadata": {
    "extension_name": "Evoq.PersonaBar.SiteSettings",
    "extension_type": "PersonaBar Module",
    "feature_name": "Search Crawling Excluded Directory Management",
    "feature_description": "Manages directories that should be excluded from search crawling operations",
    "feature_priority": "Medium",
    "test_date": "2026-01-09T12:00:00Z",
    "tester": "Claude"
  },
  "test_scenarios": [
    {
      "scenario_name": "View list of all excluded directories with paths",
      "status": "PASS",
      "steps": [
        {
          "step_number": 1,
          "action": "Navigate to Site Settings > Search > Crawling tab",
          "expected": "Crawling tab should display with Excluded Directories section visible",
          "actual": "Successfully navigated to the Crawling tab, Excluded Directories section is visible",
          "screenshot": "Search_Crawling_Excluded_Directory_Management_step01_crawling_tab.png"
        },
        {
          "step_number": 2,
          "action": "Scroll down to view Excluded Directories section",
          "expected": "List of excluded directories should be displayed with directory paths",
          "actual": "Excluded Directories section shows 'Badges/' and 'Templates/' directories with their paths and delete icons",
          "screenshot": "Search_Crawling_Excluded_Directory_Management_step02_excluded_directories_section.png"
        }
      ],
      "issues": []
    },
    {
      "scenario_name": "Add directory to excluded list using folder picker",
      "status": "FAIL",
      "steps": [
        {
          "step_number": 1,
          "action": "Click 'Add Directory' button in Excluded Directories section",
          "expected": "Folder picker form should open",
          "actual": "Folder picker form opened successfully showing Cancel and Save buttons with folder selection dropdown",
          "screenshot": "Search_Crawling_Excluded_Directory_Management_step03_folder_picker_open.png"
        },
        {
          "step_number": 2,
          "action": "Click on folder picker dropdown to expand folder tree",
          "expected": "Folder tree should expand showing available directories",
          "actual": "Folder tree expanded showing folders: Badges, Groups, Images, PermissionsTestFolder, Templates, Users, WorkflowTestFolder",
          "screenshot": "Search_Crawling_Excluded_Directory_Management_step05_folder_picker_visible.png"
        },
        {
          "step_number": 3,
          "action": "Attempt to select a folder from the tree",
          "expected": "Folder should be selected and displayed in the picker",
          "actual": "Unable to select folder due to UI element interception - multiple overlapping div elements intercept pointer events preventing folder selection",
          "screenshot": "Search_Crawling_Excluded_Directory_Management_step04_folder_selected.png"
        }
      ],
      "issues": [
        "Folder picker has UI interaction issues - overlapping elements (folder-selector-container, selected-item, edit-directory-buttons) intercept pointer events, preventing reliable folder selection",
        "TimeoutError occurs when attempting to click folder items in the tree due to element interception"
      ]
    },
    {
      "scenario_name": "Remove directory from excluded list",
      "status": "PASS",
      "steps": [
        {
          "step_number": 1,
          "action": "Click delete (trash) icon next to 'Templates/' directory",
          "expected": "Confirmation dialog should appear",
          "actual": "Confirmation dialog appeared with message 'Are you sure you want to delete Templates/?' with Yes and No buttons",
          "screenshot": "Search_Crawling_Excluded_Directory_Management_step06_delete_confirmation.png"
        },
        {
          "step_number": 2,
          "action": "Click 'Yes' to confirm deletion",
          "expected": "Templates/ directory should be removed from the excluded list",
          "actual": "Templates/ was successfully removed from the excluded list, only Badges/ remains",
          "screenshot": "Search_Crawling_Excluded_Directory_Management_step07_delete_success.png"
        }
      ],
      "issues": []
    },
    {
      "scenario_name": "Test deletion confirmation dialog",
      "status": "PASS",
      "steps": [
        {
          "step_number": 1,
          "action": "Initiate deletion of a directory",
          "expected": "Confirmation dialog should appear with warning message and Yes/No options",
          "actual": "Confirmation dialog displayed correctly with warning icon, message 'Are you sure you want to delete Templates/?' and Yes/No buttons",
          "screenshot": "Search_Crawling_Excluded_Directory_Management_step06_delete_confirmation.png"
        }
      ],
      "issues": []
    },
    {
      "scenario_name": "Verify directory path display",
      "status": "PASS",
      "steps": [
        {
          "step_number": 1,
          "action": "View the excluded directories list",
          "expected": "Directory paths should be displayed with trailing slash format",
          "actual": "Directory paths displayed correctly as 'Badges/' and 'Templates/' with trailing slashes indicating they are directories",
          "screenshot": "Search_Crawling_Excluded_Directory_Management_step02_excluded_directories_section.png"
        }
      ],
      "issues": []
    },
    {
      "scenario_name": "Test folder picker functionality",
      "status": "FAIL",
      "steps": [
        {
          "step_number": 1,
          "action": "Open folder picker by clicking Add Directory",
          "expected": "Folder picker should open with tree view of available folders",
          "actual": "Folder picker opens and displays folder tree correctly",
          "screenshot": "Search_Crawling_Excluded_Directory_Management_step05_folder_picker_visible.png"
        },
        {
          "step_number": 2,
          "action": "Attempt to select a folder from the tree",
          "expected": "Clicking on a folder should select it",
          "actual": "Folder selection fails due to UI element overlay issues - pointer events are intercepted by overlapping container elements",
          "screenshot": "Search_Crawling_Excluded_Directory_Management_step08_no_folder_selected_error.png"
        }
      ],
      "issues": [
        "Folder picker selection mechanism has overlapping element issues preventing reliable folder selection through UI automation"
      ]
    },
    {
      "scenario_name": "Add already excluded directory (duplicate error)",
      "status": "FAIL",
      "steps": [
        {
          "step_number": 1,
          "action": "Attempt to add a directory that is already in the excluded list",
          "expected": "System should display duplicate error message",
          "actual": "Could not complete test due to folder picker UI interaction issues preventing folder selection. Code review confirms DirectoryIncludedException is thrown for duplicates.",
          "screenshot": "Search_Crawling_Excluded_Directory_Management_step08_no_folder_selected_error.png"
        }
      ],
      "issues": [
        "Test could not be completed due to folder picker UI interaction issues",
        "Code review confirms backend properly handles duplicates via DirectoryIncludedException in SearchSpiderHelper.AddDirectoryToPortalExcludedDirectoryList()"
      ]
    },
    {
      "scenario_name": "Basic validation - required folder selection",
      "status": "PASS",
      "steps": [
        {
          "step_number": 1,
          "action": "Click Save without selecting a folder",
          "expected": "Validation error should appear indicating folder selection is required",
          "actual": "Error toast appeared with message 'Please select a folder.' and folder picker field highlighted in red indicating validation error",
          "screenshot": "Search_Crawling_Excluded_Directory_Management_step08_no_folder_selected_error.png"
        }
      ],
      "issues": []
    }
  ],
  "observations": [
    "Folder picker component (dnn-folder-picker) has UI overlay issues that intercept pointer events, making folder selection unreliable through automated UI testing",
    "Code review confirms SaveCrawlExcludedDirectory and DeleteCrawlExcludedDirectory API endpoints exist and properly validate DirectoryId",
    "Code review confirms duplicate directory handling exists via DirectoryIncludedException in the backend",
    "The Included Directories and Excluded Directories lists share the same UI component (DirectoryList) with different type props",
    "Delete confirmation dialog works correctly and properly removes directories from the list"
  ],
  "summary": {
    "total_scenarios": 8,
    "passed": 5,
    "failed": 3,
    "pass_rate": "62.5%"
  }
}
