{
  "metadata": {
    "extension_name": "Evoq.PersonaBar.SiteSettings",
    "extension_type": "PersonaBar Module",
    "feature_name": "Portal Role Retrieval for Authentication",
    "feature_description": "Provides DNN portal roles for URL path authentication configuration",
    "feature_priority": "Low",
    "test_date": "2026-01-09T12:30:00Z",
    "tester": "Claude"
  },
  "test_scenarios": [
    {
      "scenario_name": "Retrieve all roles for current portal",
      "status": "PASS",
      "steps": [
        {
          "step_number": 1,
          "action": "Navigate to Settings > Site Settings > Search > Crawling tab",
          "expected": "Crawling settings page with URL Paths section should be displayed",
          "actual": "Crawling tab displayed with URL Paths listing multiple configured URLs",
          "screenshot": "Portal_Role_Retrieval_for_Authentication_step01_crawling_tab.png"
        },
        {
          "step_number": 2,
          "action": "Click edit icon on a URL path (https://localhost:8443/) to open the URL path edit form",
          "expected": "URL path edit form should open with DNN Role Impersonation dropdown",
          "actual": "Edit form opened showing URL, Sitemap URL, DNN Role Impersonation dropdown, Enable Spidering toggle, and Windows Authentication options",
          "screenshot": "Portal_Role_Retrieval_for_Authentication_step02_url_edit_form.png"
        },
        {
          "step_number": 3,
          "action": "Click on the DNN Role Impersonation dropdown to retrieve portal roles",
          "expected": "Dropdown should display a list of portal roles from the current portal",
          "actual": "Dropdown opened and displayed 10 portal roles: Administrators, Community Manager, Content Editors, Content Managers, Moderators, Registered Users, Subscribers, Test Activity Group, Translator (en-US), Unverified Users",
          "screenshot": "Portal_Role_Retrieval_for_Authentication_step03_roles_dropdown_open.png"
        },
        {
          "step_number": 4,
          "action": "Select the Administrators role from the dropdown",
          "expected": "Role should be selected and displayed in the dropdown field",
          "actual": "Administrators role was successfully selected and displayed in the DNN Role Impersonation dropdown",
          "screenshot": "Portal_Role_Retrieval_for_Authentication_step04_role_selected.png"
        }
      ],
      "issues": []
    }
  ],
  "observations": [
    "The GetDnnPortalRoles API endpoint (Services/EvoqSiteSettingsController.cs:117-130) successfully retrieves all roles from the current portal",
    "The role retrieval is implemented using RoleController.Instance.GetRoles(portalId) which returns both system roles and custom roles",
    "System roles (Administrators, Registered Users, Subscribers, Unverified Users) are included in the results",
    "Custom portal roles (Community Manager, Content Editors, Content Managers, Moderators, Test Activity Group, Translator) are also included",
    "The role selection is used for DNN Impersonation during URL crawling, allowing the search crawler to access content with specific role permissions"
  ],
  "summary": {
    "total_scenarios": 1,
    "passed": 1,
    "failed": 0,
    "pass_rate": "100%"
  }
}
