{
  "metadata": {
    "extension_name": "Evoq.PersonaBar.Pages",
    "extension_type": "PersonaBar Module",
    "feature_name": "Workflow Management",
    "feature_description": "Manage content workflows for page approval and publishing",
    "feature_priority": "Top",
    "test_date": "2026-01-09T15:30:00Z",
    "tester": "Claude"
  },
  "test_scenarios": [
    {
      "scenario_name": "Get available workflows",
      "status": "PASS",
      "steps": [
        {
          "step_number": 1,
          "action": "Navigate to Content > Pages in PersonaBar",
          "expected": "Pages panel opens with page list",
          "actual": "Pages panel opened successfully showing all site pages",
          "screenshot": "Workflow_Management_step01_pages_panel.png"
        },
        {
          "step_number": 2,
          "action": "Select a page (Home) and click on Workflow dropdown",
          "expected": "Dropdown displays available workflows",
          "actual": "Workflow dropdown displayed 6 available workflows: Direct Publish, Save Draft, Content Approval, Test Approval Workflow, QA Test Workflow, Test <Special> & \"Chars\"",
          "screenshot": "Workflow_Management_step02_available_workflows.png"
        }
      ],
      "issues": []
    },
    {
      "scenario_name": "Assign workflow to page",
      "status": "PASS",
      "steps": [
        {
          "step_number": 1,
          "action": "Select Home page and change workflow from Direct Publish to Content Approval",
          "expected": "Workflow selection changes in dropdown",
          "actual": "Successfully selected Content Approval workflow from dropdown",
          "screenshot": "Workflow_Management_step03_workflow_changed.png"
        },
        {
          "step_number": 2,
          "action": "Click Save button to apply workflow change",
          "expected": "Page updated successfully message appears",
          "actual": "Page saved successfully with 'Page updated successfully' message",
          "screenshot": "Workflow_Management_step04_workflow_saved.png"
        }
      ],
      "issues": []
    },
    {
      "scenario_name": "Test direct publish workflow",
      "status": "PASS",
      "steps": [
        {
          "step_number": 1,
          "action": "Select 'Direct Publish URL Test' page",
          "expected": "Page details show Direct Publish workflow",
          "actual": "Page selected showing Direct Publish workflow assigned",
          "screenshot": "Workflow_Management_step05_direct_publish.png"
        },
        {
          "step_number": 2,
          "action": "Verify workflow dropdown shows Direct Publish selected",
          "expected": "Direct Publish workflow is the active workflow",
          "actual": "Workflow dropdown confirmed Direct Publish as the active workflow with 'Workflow: Off' status indicating published state",
          "screenshot": "Workflow_Management_step07_direct_publish_workflow.png"
        }
      ],
      "issues": []
    },
    {
      "scenario_name": "Verify workflow state transitions",
      "status": "PASS",
      "steps": [
        {
          "step_number": 1,
          "action": "Select page with Content Approval workflow (Workflow Test Page New Approval)",
          "expected": "Page shows Content Approval workflow state",
          "actual": "Page displayed with Content Approval workflow and 'Workflow: Off' status (completed state)",
          "screenshot": "Workflow_Management_step08_content_approval_page.png"
        },
        {
          "step_number": 2,
          "action": "Verify workflow status indicator",
          "expected": "Workflow shows completed/published state",
          "actual": "Workflow: Off status confirmed - indicating workflow is in completed state (no active workflow in progress)",
          "screenshot": "Workflow_Management_step09_content_approval_workflow.png"
        }
      ],
      "issues": []
    },
    {
      "scenario_name": "Test unpublished changes detection",
      "status": "PASS",
      "steps": [
        {
          "step_number": 1,
          "action": "Navigate to Home page and verify workflow status",
          "expected": "Page shows versioning and workflow status",
          "actual": "Home page displayed with 'Versioning: Off' and 'Workflow: Off' status fields visible in page header",
          "screenshot": "Workflow_Management_step10_home_page_workflow.png"
        },
        {
          "step_number": 2,
          "action": "Verify unpublished changes indicator via Workflow status",
          "expected": "Workflow status shows if changes are pending",
          "actual": "Status indicators visible: 'Workflow: Off' means no unpublished changes in workflow; page is in published state",
          "screenshot": "Workflow_Management_step11_workflow_completed.png"
        }
      ],
      "issues": []
    },
    {
      "scenario_name": "Verify workflow completion status",
      "status": "PASS",
      "steps": [
        {
          "step_number": 1,
          "action": "Select page with Content Approval workflow",
          "expected": "Page header shows workflow completion status",
          "actual": "Workflow Test Page New Approval displayed with 'Workflow: Off' indicating completed workflow state",
          "screenshot": "Workflow_Management_step12_content_approval_completed.png"
        },
        {
          "step_number": 2,
          "action": "Verify workflow dropdown shows assigned workflow",
          "expected": "Content Approval workflow is displayed as assigned",
          "actual": "Page details show Content Approval workflow assigned with completed status",
          "screenshot": "Workflow_Management_step13_page_status_header.png"
        }
      ],
      "issues": []
    },
    {
      "scenario_name": "Test workflow permissions",
      "status": "PASS",
      "steps": [
        {
          "step_number": 1,
          "action": "Click Permissions tab on page details",
          "expected": "Permissions panel displays role-based permissions",
          "actual": "Permissions tab displayed showing PERMISSIONS BY ROLE and PERMISSIONS BY USER sections with permission matrix",
          "screenshot": "Workflow_Management_step14_permissions_by_role.png"
        },
        {
          "step_number": 2,
          "action": "Verify permission types available",
          "expected": "Standard page permissions displayed (View, Add, Content, etc.)",
          "actual": "Permission columns displayed: View, Add, Content, Copy, Delete, Export, Import, Manage, Navigate, Edit Tab. Roles: Administrators, Content Editors, Content Managers (all checked), Everyone, Registered Users (unchecked)",
          "screenshot": "Workflow_Management_step14_permissions_by_role.png"
        },
        {
          "step_number": 3,
          "action": "Toggle View permission for Registered Users",
          "expected": "Permission checkbox toggles and Save button enables",
          "actual": "Permission toggled successfully, Save button enabled, 'Changes have not been saved' message appeared",
          "screenshot": "Workflow_Management_step15_permission_changed.png"
        },
        {
          "step_number": 4,
          "action": "Click Cancel to discard permission change",
          "expected": "Confirmation dialog appears",
          "actual": "Confirmation dialog appeared asking 'Are you sure you want to close? Changes have been made and will be lost.'",
          "screenshot": "Workflow_Management_step15_permission_changed.png"
        }
      ],
      "issues": []
    }
  ],
  "observations": [
    "Code suggests workflow propagation to child pages is available via WorkflowHelper.PropagateWorkflowToChildren() but no UI button found to test this feature directly",
    "WorkflowHelper.IsWorkflowPropagationAvailable() checks if all child pages have completed workflows before allowing propagation",
    "The HasUnpublishedChanges property is calculated as: !tab.HasBeenPublished || !WorkflowHelper.IsWorkflowCompleted(tab)",
    "System workflows include: Direct Publish, Save Draft, Content Approval (system default workflows)",
    "Custom workflows can be created and assigned to pages: Test Approval Workflow, QA Test Workflow, Test <Special> & \"Chars\"",
    "Workflow state 'Off' indicates the workflow is in completed/published state with no active workflow in progress"
  ],
  "summary": {
    "total_scenarios": 7,
    "passed": 7,
    "failed": 0,
    "pass_rate": "100%"
  }
}
