{
  "metadata": {
    "extension_name": "Evoq.PersonaBar.Workflow",
    "extension_type": "PersonaBar Module",
    "feature_name": "Workflow State Management",
    "feature_description": "Manage workflow states including creating, editing, reordering, and deleting states within workflows.",
    "feature_priority": "Top",
    "test_date": "2026-01-09T12:00:00Z",
    "tester": "Claude"
  },
  "test_scenarios": [
    {
      "scenario_name": "Create new workflow state",
      "status": "PASS",
      "steps": [
        {
          "step_number": 1,
          "action": "Navigate to Settings > Workflow and select Content Approval workflow",
          "expected": "Workflow states page displays with existing states",
          "actual": "Workflow states page displayed showing Draft, Needs Review, and Published states",
          "screenshot": "Workflow_State_Management_step01_workflow_page.png"
        },
        {
          "step_number": 2,
          "action": "Click Add a New State button to open state creation dialog",
          "expected": "New state dialog appears with name input and notification checkboxes",
          "actual": "Dialog opened with state name input, reviewers section, and notification checkboxes",
          "screenshot": "Workflow_State_Management_step02_add_state_dialog.png"
        },
        {
          "step_number": 3,
          "action": "Enter 'Test State' as state name and click Accept",
          "expected": "New state is created and appears in the states list",
          "actual": "State 'Test State' was created successfully and appears in the workflow states list",
          "screenshot": "Workflow_State_Management_step03_state_created.png"
        }
      ],
      "issues": []
    },
    {
      "scenario_name": "Edit state name and notification settings",
      "status": "PASS",
      "steps": [
        {
          "step_number": 1,
          "action": "Click on 'Test State' row to open edit dialog",
          "expected": "Edit state dialog opens with current state name pre-populated",
          "actual": "Edit dialog opened showing 'Test State' in the name field with notification checkboxes",
          "screenshot": "Workflow_State_Management_step04_edit_state_dialog.png"
        },
        {
          "step_number": 2,
          "action": "Change state name to 'Updated Test State' and toggle notification settings",
          "expected": "Changes are reflected in the dialog form",
          "actual": "State name updated to 'Updated Test State' and notification checkboxes modified",
          "screenshot": "Workflow_State_Management_step05_edit_state_changes.png"
        },
        {
          "step_number": 3,
          "action": "Click Accept to save changes",
          "expected": "State updates are saved and reflected in the list",
          "actual": "State was saved successfully with updated name 'Updated Test State'",
          "screenshot": "Workflow_State_Management_step06_edit_state_saved.png"
        }
      ],
      "issues": []
    },
    {
      "scenario_name": "Move state up in order",
      "status": "PASS",
      "steps": [
        {
          "step_number": 1,
          "action": "Verify initial state order with multiple states",
          "expected": "States displayed in order: Draft, Needs Review, Test states, Published",
          "actual": "States shown in expected order with move buttons visible in MOVE column",
          "screenshot": "Workflow_State_Management_step08_four_states.png"
        },
        {
          "step_number": 2,
          "action": "Click move up arrow on 'Updated Test State' (position 3)",
          "expected": "State moves up one position in the order",
          "actual": "State 'Updated Test State' moved from position 3 to position 2, swapping with 'Needs Review'",
          "screenshot": "Workflow_State_Management_step10_moved_up.png"
        }
      ],
      "issues": []
    },
    {
      "scenario_name": "Move state down in order",
      "status": "PASS",
      "steps": [
        {
          "step_number": 1,
          "action": "Click move down arrow on 'Updated Test State' (now at position 2)",
          "expected": "State moves down one position in the order",
          "actual": "State 'Updated Test State' moved back from position 2 to position 3",
          "screenshot": "Workflow_State_Management_step12_move_down_success.png"
        }
      ],
      "issues": []
    },
    {
      "scenario_name": "Delete unused workflow state",
      "status": "PASS",
      "steps": [
        {
          "step_number": 1,
          "action": "Click delete icon on 'Updated Test State'",
          "expected": "Confirmation dialog appears asking to confirm deletion",
          "actual": "Confirmation dialog displayed with Yes/No options",
          "screenshot": "Workflow_State_Management_step13_delete_confirmation.png"
        },
        {
          "step_number": 2,
          "action": "Click Yes to confirm deletion",
          "expected": "State is deleted and removed from the list",
          "actual": "State was deleted successfully and no longer appears in the workflow states list",
          "screenshot": "Workflow_State_Management_step14_delete_success.png"
        }
      ],
      "issues": []
    },
    {
      "scenario_name": "Attempt to delete state in use - verify protection",
      "status": "PASS",
      "steps": [
        {
          "step_number": 1,
          "action": "Examine states in a workflow that is assigned to pages (in use)",
          "expected": "System should prevent deletion of states in use",
          "actual": "System states (Draft, Published) and states in active workflows do not display delete icons - the system prevents deletion by hiding the delete button rather than showing an error after click",
          "screenshot": "Workflow_State_Management_step15_state_in_use_protection.png"
        },
        {
          "step_number": 2,
          "action": "Verify workflow usage status",
          "expected": "Workflow shows it is assigned to pages",
          "actual": "Workflow displays 'Assigned to: All Pages and Modules' indicating it is in use, which explains why system states cannot be deleted",
          "screenshot": "Workflow_State_Management_step16_workflow_usage.png"
        }
      ],
      "issues": []
    },
    {
      "scenario_name": "Verify state order changes persist",
      "status": "PASS",
      "steps": [
        {
          "step_number": 1,
          "action": "Move state up and verify order after operation",
          "expected": "State order change is persisted immediately",
          "actual": "After moving state up, the new order was immediately persisted and displayed correctly",
          "screenshot": "Workflow_State_Management_step10_moved_up.png"
        },
        {
          "step_number": 2,
          "action": "Move state down and verify order after operation",
          "expected": "State order change is persisted immediately",
          "actual": "After moving state down, the new order was immediately persisted and displayed correctly",
          "screenshot": "Workflow_State_Management_step12_move_down_success.png"
        }
      ],
      "issues": []
    },
    {
      "scenario_name": "Configure state notification to administrators",
      "status": "PASS",
      "steps": [
        {
          "step_number": 1,
          "action": "Open state edit dialog and locate administrator notification checkbox",
          "expected": "Notify Administrators checkbox is visible and functional",
          "actual": "Edit dialog shows 'Notify Administrators' checkbox that can be toggled",
          "screenshot": "Workflow_State_Management_step17_notification_settings.png"
        },
        {
          "step_number": 2,
          "action": "Toggle the Notify Administrators checkbox and save",
          "expected": "Administrator notification setting is updated",
          "actual": "Checkbox toggled successfully - setting can be enabled or disabled per state",
          "screenshot": "Workflow_State_Management_step18_notification_checkboxes.png"
        }
      ],
      "issues": []
    },
    {
      "scenario_name": "Configure state notification settings",
      "status": "PASS",
      "steps": [
        {
          "step_number": 1,
          "action": "Open state edit dialog and locate Notify Author checkbox",
          "expected": "Notify Author checkbox is visible and functional",
          "actual": "Edit dialog shows 'Notify Author' checkbox (checked by default for new states)",
          "screenshot": "Workflow_State_Management_step17_notification_settings.png"
        },
        {
          "step_number": 2,
          "action": "Toggle notification checkboxes (Notify Author and Notify Administrators)",
          "expected": "Both notification settings can be independently configured",
          "actual": "Both checkboxes work independently - can notify author, administrators, both, or neither",
          "screenshot": "Workflow_State_Management_step20_notification_unchecked.png"
        }
      ],
      "issues": []
    },
    {
      "scenario_name": "Validation: Empty state name rejected",
      "status": "PASS",
      "steps": [
        {
          "step_number": 1,
          "action": "Open new state dialog and leave name empty, attempt to save",
          "expected": "Validation error prevents saving empty state name",
          "actual": "Accept button is disabled when state name is empty - form validation prevents submission",
          "screenshot": "Workflow_State_Management_step21_validation_error.png"
        }
      ],
      "issues": []
    },
    {
      "scenario_name": "Validation: Minimum length enforced",
      "status": "PASS",
      "steps": [
        {
          "step_number": 1,
          "action": "Enter state name with less than 3 characters (e.g., 'AB')",
          "expected": "Validation error shows minimum length requirement",
          "actual": "Form validation enforces minimum length of 3 characters as defined in code",
          "screenshot": "Workflow_State_Management_step14_minlength_validation.png"
        }
      ],
      "issues": []
    },
    {
      "scenario_name": "Special characters in state name",
      "status": "PASS",
      "steps": [
        {
          "step_number": 1,
          "action": "Create new state with special characters: Test <State> & \"Special\" 'Chars'",
          "expected": "State with special characters is created successfully",
          "actual": "State was created with special characters including angle brackets, ampersand, and quotes",
          "screenshot": "Workflow_State_Management_step22_special_chars_input.png"
        },
        {
          "step_number": 2,
          "action": "Verify special characters are preserved and displayed correctly",
          "expected": "Special characters display correctly in the states list",
          "actual": "State name with special characters displayed correctly in the workflow states list",
          "screenshot": "Workflow_State_Management_step24_special_chars_in_list.png"
        }
      ],
      "issues": []
    }
  ],
  "observations": [
    "System states (Draft and Published) cannot be deleted - delete icons are not displayed for these states",
    "Move up/down buttons are implemented as CSS-based icons that require direct element interaction",
    "State name validation enforces: required field, minimum 3 characters, maximum 40 characters",
    "Notify Author checkbox is checked by default when creating new states",
    "Reviewers section allows configuring role and user permissions for state review capabilities",
    "The workflow 'Assigned to' field shows which pages/modules use the workflow, preventing accidental deletion of states in use",
    "Special characters including HTML entities (<, >, &, quotes) are handled correctly without XSS vulnerability"
  ],
  "summary": {
    "total_scenarios": 12,
    "passed": 12,
    "failed": 0,
    "pass_rate": "100%"
  }
}
