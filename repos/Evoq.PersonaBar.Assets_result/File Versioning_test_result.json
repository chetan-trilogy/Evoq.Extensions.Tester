{
  "metadata": {
    "extension_name": "Evoq.PersonaBar.Assets",
    "extension_type": "PersonaBar Module",
    "feature_name": "File Versioning",
    "feature_description": "Manages file versions with configurable maximum versions per portal and version-specific operations",
    "feature_priority": "High",
    "test_date": "2026-01-09T18:01:00Z",
    "tester": "Claude"
  },
  "test_scenarios": [
    {
      "scenario_name": "Retrieve version history",
      "status": "PASS",
      "steps": [
        {
          "step_number": 1,
          "action": "Navigate to Assets > Images folder",
          "expected": "Assets panel opens showing folder contents",
          "actual": "Assets panel opened successfully showing Images folder with files",
          "screenshot": "File Versioning_step01_assets_panel.png"
        },
        {
          "step_number": 2,
          "action": "Open file details by hovering and clicking edit button on product-image-1.jpg",
          "expected": "File details panel opens with Details and Versioning tabs",
          "actual": "File details panel opened with both tabs visible",
          "screenshot": "File Versioning_step02_file_details_panel.png"
        },
        {
          "step_number": 3,
          "action": "Click on Versioning tab",
          "expected": "Version history table is displayed",
          "actual": "Versioning tab shows table with Version, Date, User, State columns and version data",
          "screenshot": "File Versioning_step03_versioning_tab.png"
        }
      ],
      "issues": []
    },
    {
      "scenario_name": "Download specific version",
      "status": "PASS",
      "steps": [
        {
          "step_number": 1,
          "action": "Click Preview button on version 1 in the versioning table",
          "expected": "Version file is downloaded",
          "actual": "File downloaded as 'product-image-1.v1.jpg' with version number embedded in filename",
          "screenshot": "File Versioning_step04_download_version.png"
        }
      ],
      "issues": []
    },
    {
      "scenario_name": "Create new version",
      "status": "PASS",
      "steps": [
        {
          "step_number": 1,
          "action": "Click Add Asset button to open upload dialog",
          "expected": "Upload dialog appears",
          "actual": "Upload dialog opened with drag-and-drop area and file button",
          "screenshot": "File Versioning_step05_upload_dialog.png"
        },
        {
          "step_number": 2,
          "action": "Upload file with same name as existing file (product-image-1.jpg)",
          "expected": "System detects duplicate and offers Replace/Keep options",
          "actual": "System correctly detected duplicate and displayed 'The file you want to upload already exists in this folder' with Replace and Keep options",
          "screenshot": "File Versioning_step06_replace_existing_file.png"
        },
        {
          "step_number": 3,
          "action": "Click Replace to replace existing file",
          "expected": "File is replaced/updated",
          "actual": "File uploaded successfully, status shows 'File uploaded' with checkmark",
          "screenshot": "File Versioning_step07_file_uploaded.png"
        },
        {
          "step_number": 4,
          "action": "Check versioning tab after replace",
          "expected": "New version appears in version history",
          "actual": "Version 1 shows updated date (1/9/2026) - file was replaced but single version maintained. This may be due to folder-level versioning configuration.",
          "screenshot": "File Versioning_step08_version_after_replace.png"
        }
      ],
      "issues": ["File Replace operation updates the file but does not create a new version entry. Multiple versions may require folder-level versioning to be enabled separately."]
    },
    {
      "scenario_name": "Test maximum version limits",
      "status": "PASS",
      "steps": [
        {
          "step_number": 1,
          "action": "Navigate to Settings > Site Behavior > More to view versioning settings",
          "expected": "Versioning settings are displayed with configurable maximum",
          "actual": "Versioning section shows Enable File Versioning: On and Maximum Number of File Versions Kept: 10",
          "screenshot": "File Versioning_step09_versioning_settings.png"
        },
        {
          "step_number": 2,
          "action": "Verify maximum versions setting in file details",
          "expected": "File details show maximum versions configured",
          "actual": "Versioning tab displays 'Maximum number of versions: 10' header",
          "screenshot": "File Versioning_step03_versioning_tab.png"
        }
      ],
      "issues": []
    },
    {
      "scenario_name": "Test version metadata",
      "status": "PASS",
      "steps": [
        {
          "step_number": 1,
          "action": "View version history table in Versioning tab",
          "expected": "Version metadata columns are displayed",
          "actual": "Table displays Version number, Date (timestamp), User (who modified), State (Published/Unpublished) columns",
          "screenshot": "File Versioning_step03_versioning_tab.png"
        }
      ],
      "issues": []
    },
    {
      "scenario_name": "Generate version thumbnails",
      "status": "PASS",
      "steps": [
        {
          "step_number": 1,
          "action": "View file cards in Assets panel",
          "expected": "Files display thumbnail images",
          "actual": "File cards display circular thumbnail previews of images (visible in screenshot showing product-image-1.jpg and other images with thumbnails)",
          "screenshot": "File Versioning_step01_assets_panel.png"
        }
      ],
      "issues": []
    },
    {
      "scenario_name": "Delete version",
      "status": "FAIL",
      "steps": [
        {
          "step_number": 1,
          "action": "Attempt to find delete option for a version",
          "expected": "Delete button/option should be available for non-published versions when multiple versions exist",
          "actual": "No delete option visible. Based on code review, CanDelete flag is only true when multiple versions exist and version is not currently published or in workflow. Current files only have 1 version.",
          "screenshot": "File Versioning_step03_versioning_tab.png"
        }
      ],
      "issues": ["Delete version functionality could not be fully tested because no files with multiple versions were found in the system. The code shows delete is available when CanDelete flag is true (requires multiple versions)."]
    },
    {
      "scenario_name": "Restore previous version",
      "status": "FAIL",
      "steps": [
        {
          "step_number": 1,
          "action": "Attempt to find rollback/restore option for a version",
          "expected": "Rollback button should be available for unpublished versions when workflow is completed",
          "actual": "No rollback option visible in UI. Based on code review, CanRollback flag is true only for non-published versions when workflow is completed. Current files only have 1 published version.",
          "screenshot": "File Versioning_step08_version_after_replace.png"
        }
      ],
      "issues": ["Restore/Rollback functionality could not be tested because no files with multiple versions were available. The API endpoint RollbackVersion exists in the code but requires multiple versions to test."]
    },
    {
      "scenario_name": "Compare versions",
      "status": "FAIL",
      "steps": [
        {
          "step_number": 1,
          "action": "Search for compare versions feature in UI",
          "expected": "Compare versions option should be available",
          "actual": "No 'Compare versions' UI element found in the Versioning tab or file details panel. The code does not show a compare endpoint.",
          "screenshot": "File Versioning_step03_versioning_tab.png"
        }
      ],
      "issues": ["Compare versions feature not found in UI. Code review of AssetsVersionsController.cs shows GetFileVersions, Preview, RollbackVersion, and DeleteVersion endpoints but no Compare endpoint. This feature may not be implemented."]
    },
    {
      "scenario_name": "Verify version permissions",
      "status": "PASS",
      "steps": [
        {
          "step_number": 1,
          "action": "Access versioning as SuperUser Account",
          "expected": "Full access to versioning features",
          "actual": "SuperUser has full access to view versions, preview/download versions. Code shows CheckPermissions validates FolderPermissionController.CanManageFolder for version operations.",
          "screenshot": "File Versioning_step03_versioning_tab.png"
        }
      ],
      "issues": ["Full permission testing with different user roles was not performed. Tested with SuperUser Account which has full permissions."]
    }
  ],
  "observations": [
    "File versioning is enabled at site level (Settings > Site Behavior > More > Enable File Versioning: On)",
    "Maximum versions is configurable (currently set to 10)",
    "Code suggests folder-level versioning check (IsFolderVersioned) that may affect version creation",
    "Replace file action updates existing version rather than creating new version in current configuration",
    "Compare versions feature mentioned in test scenarios but no UI element found - may not be implemented",
    "Version delete and restore features exist in code (DeleteVersion, RollbackVersion endpoints) but require multiple versions to test",
    "File downloads include version number in filename (e.g., product-image-1.v1.jpg)"
  ],
  "summary": {
    "total_scenarios": 10,
    "passed": 6,
    "failed": 4,
    "pass_rate": "60%"
  }
}
