{
  "metadata": {
    "extension_name": "Evoq.Social.Wiki",
    "extension_type": "Module",
    "feature_name": "Revision Management",
    "feature_description": "Track and manage article revisions with approval workflow and version history",
    "feature_priority": "High",
    "test_date": "2026-01-09T12:00:00Z",
    "tester": "Claude"
  },
  "test_scenarios": [
    {
      "scenario_name": "View revision history",
      "status": "PASS",
      "steps": [
        {
          "step_number": 1,
          "action": "Navigate to Wiki module and select an article",
          "expected": "Article page should load with wiki content",
          "actual": "Article 'My First Article' page loaded successfully showing wiki content",
          "screenshot": "Revision_Management_step02_article_page.png"
        },
        {
          "step_number": 2,
          "action": "Click History link in the article sidebar",
          "expected": "Revision history dialog should open showing all revisions",
          "actual": "History dialog opened showing revision list with Version 1 and Version 2, including dates, authors, and state (Published)",
          "screenshot": "Revision_Management_step03_view_history.png"
        }
      ],
      "issues": []
    },
    {
      "scenario_name": "Compare different revisions",
      "status": "PASS",
      "steps": [
        {
          "step_number": 1,
          "action": "Open revision history and select two revisions to compare",
          "expected": "Compare dialog should open with side-by-side view",
          "actual": "Compare Revisions dialog opened showing side-by-side comparison with original version on left and modified version on right",
          "screenshot": "Revision_Management_step04_compare_revisions.png"
        },
        {
          "step_number": 2,
          "action": "Verify diff highlighting",
          "expected": "Differences between revisions should be highlighted",
          "actual": "Differences were clearly shown - original content 'This is my first wiki article' vs modified 'This is my UPDATED wiki article content'",
          "screenshot": "Revision_Management_step04_compare_revisions.png"
        }
      ],
      "issues": []
    },
    {
      "scenario_name": "Approve pending revision",
      "status": "FAIL",
      "steps": [
        {
          "step_number": 1,
          "action": "Attempt to create a pending revision by unchecking 'Approved' checkbox and saving article",
          "expected": "A pending revision should be created that requires approval",
          "actual": "SuperUser account auto-publishes all revisions regardless of 'Approved' checkbox state. No pending revisions were created.",
          "screenshot": "Revision_Management_step08_history_after_edit.png"
        },
        {
          "step_number": 2,
          "action": "Look for Approve button in revision history",
          "expected": "Approve button should be visible for pending revisions",
          "actual": "No pending revisions exist in the system to approve. History shows only Published state (2) revisions with Rollback/Delete options.",
          "screenshot": "Revision_Management_step03_view_history.png"
        }
      ],
      "issues": ["SuperUser account cannot create pending revisions - all edits are auto-published. Need a non-admin user account to test approval workflow."]
    },
    {
      "scenario_name": "Reject pending revision",
      "status": "FAIL",
      "steps": [
        {
          "step_number": 1,
          "action": "Look for pending revisions to reject",
          "expected": "Pending revisions should be available with Reject button",
          "actual": "No pending revisions exist in the system. SuperUser auto-publishes all content.",
          "screenshot": "Revision_Management_step08_history_after_edit.png"
        }
      ],
      "issues": ["Cannot test rejection workflow without pending revisions. SuperUser bypasses approval workflow."]
    },
    {
      "scenario_name": "Restore previous revision",
      "status": "PASS",
      "steps": [
        {
          "step_number": 1,
          "action": "Open revision history and click Rollback on a previous version",
          "expected": "Rollback should create a new revision with the previous content",
          "actual": "Rollback successfully created Version 3 labeled as 'Rollback 2', restoring the content from Version 2",
          "screenshot": "Revision_Management_step05_rollback_success.png"
        },
        {
          "step_number": 2,
          "action": "Verify restored content",
          "expected": "Article should display the restored content from the rolled-back version",
          "actual": "Article page updated to show the restored content from the previous revision",
          "screenshot": "Revision_Management_step05_rollback_success.png"
        }
      ],
      "issues": []
    },
    {
      "scenario_name": "Test revision state transitions (Draft->Pending->Published)",
      "status": "FAIL",
      "steps": [
        {
          "step_number": 1,
          "action": "Attempt to save article as draft",
          "expected": "Article should be saved in Draft state (not published)",
          "actual": "No draft state option available. Article editor has 'Approved' checkbox but unchecking it still publishes for SuperUser.",
          "screenshot": "Revision_Management_step07_edit_dialog.png"
        },
        {
          "step_number": 2,
          "action": "Check revision states in history",
          "expected": "Should see revisions in Draft (pending save), Pending (awaiting approval), and Published states",
          "actual": "Only Published state (state=2) revisions visible. Code indicates states: 0=Pending, 1=Rejected, 2=Published, 3=Deleted but only Published shown.",
          "screenshot": "Revision_Management_step08_history_after_edit.png"
        }
      ],
      "issues": ["Full state transition flow (Draft->Pending->Published) cannot be tested with SuperUser account which bypasses approval workflow."]
    },
    {
      "scenario_name": "Delete revision",
      "status": "PASS",
      "steps": [
        {
          "step_number": 1,
          "action": "Open revision history and click Delete on a revision",
          "expected": "Revision should be deleted from the history",
          "actual": "Delete confirmation appeared and revision was successfully removed from the history list",
          "screenshot": "Revision_Management_step06_delete_success.png"
        },
        {
          "step_number": 2,
          "action": "Verify revision is removed",
          "expected": "Deleted revision should no longer appear in the history",
          "actual": "Version 3 (Rollback 2) was deleted and no longer appears in the revision history",
          "screenshot": "Revision_Management_step06_delete_success.png"
        }
      ],
      "issues": []
    },
    {
      "scenario_name": "Test multiple pending revisions",
      "status": "FAIL",
      "steps": [
        {
          "step_number": 1,
          "action": "Attempt to create multiple pending revisions",
          "expected": "Multiple pending revisions should be queued for approval",
          "actual": "Cannot create any pending revisions with SuperUser account. All edits are immediately published.",
          "screenshot": "Revision_Management_step08_history_after_edit.png"
        }
      ],
      "issues": ["Cannot test multiple pending revisions feature because SuperUser auto-publishes all content, preventing creation of pending state."]
    }
  ],
  "observations": [
    "Code review confirms revision states: 0=Pending, 1=Rejected, 2=Published, 3=Deleted (from ChangesetControl.ascx)",
    "The approval workflow (Approve/Reject buttons) is only shown for revisions in Pending state (state == 0) per the UI code",
    "SuperUser account bypasses the approval workflow - all content is auto-published regardless of 'Approved' checkbox state",
    "Testing the full approval workflow requires a non-SuperUser account that is subject to content moderation",
    "Rollback functionality creates a new revision with content from a previous version, properly labeled as 'Rollback X'",
    "Delete functionality removes individual revisions from history while preserving the article",
    "Compare revisions feature provides clear side-by-side diff view showing content changes between versions",
    "The RevisionController integration from Evoq.Revisions component handles all revision operations including publish, reject, rollback, and delete"
  ],
  "summary": {
    "total_scenarios": 8,
    "passed": 4,
    "failed": 4,
    "pass_rate": "50%"
  }
}
