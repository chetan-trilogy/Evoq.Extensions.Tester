{
  "metadata": {
    "extension_name": "Evoq.PersonaBar.Templates",
    "extension_type": "PersonaBar Module",
    "feature_name": "Create New Template",
    "feature_description": "Allows administrators to create new page templates with name, description, and layout selection",
    "feature_priority": "Top",
    "test_date": "2026-01-09T12:00:00Z",
    "tester": "Claude"
  },
  "test_scenarios": [
    {
      "scenario_name": "Navigate to Page Templates feature",
      "status": "PASS",
      "steps": [
        {
          "step_number": 1,
          "action": "Navigate to Admin > Manage > Templates",
          "expected": "Page Templates panel should open",
          "actual": "Page Templates panel opened successfully with 'Add Template' button visible",
          "screenshot": "Create_New_Template_step00_login_success.png"
        }
      ],
      "issues": []
    },
    {
      "scenario_name": "Create template when no existing templates",
      "status": "PASS",
      "steps": [
        {
          "step_number": 1,
          "action": "Click Add Template button when no templates exist",
          "expected": "Should display appropriate error or guidance message",
          "actual": "System correctly displays message: 'You must save an existing page as a template prior to create a new template.'",
          "screenshot": "Create_New_Template_step01_no_templates_message.png"
        }
      ],
      "issues": []
    },
    {
      "scenario_name": "Save existing page as template (prerequisite)",
      "status": "FAIL",
      "steps": [
        {
          "step_number": 1,
          "action": "Navigate to Content > Pages",
          "expected": "Pages panel should open",
          "actual": "Pages panel opened successfully",
          "screenshot": "Create_New_Template_step02_save_base_template_form.png"
        },
        {
          "step_number": 2,
          "action": "Click Save Page Template dropdown and select 'Evoq Page Template'",
          "expected": "Template save form should appear",
          "actual": "Template save form appeared with Template Name and Description fields",
          "screenshot": "Create_New_Template_step02_save_base_template_form.png"
        },
        {
          "step_number": 3,
          "action": "Enter template name 'Base Template' and description, then click Save",
          "expected": "Template should be saved successfully",
          "actual": "Save failed with HTTP 400 Bad Request error - server rejected the request",
          "screenshot": "Create_New_Template_step03_save_error.png"
        }
      ],
      "issues": [
        "Server returns HTTP 400 Bad Request when attempting to save a page as a template",
        "This server-side error prevents the creation of any templates, which blocks testing of the 'Create New Template' feature"
      ]
    },
    {
      "scenario_name": "Create template with valid name and description",
      "status": "FAIL",
      "steps": [
        {
          "step_number": 1,
          "action": "Attempt to open Add Template form",
          "expected": "Add Template form should open with name, description fields and layout selection",
          "actual": "Form cannot be opened because there are no existing templates to select as layout - the system requires at least one template to exist before creating new ones",
          "screenshot": "Create_New_Template_step01_no_templates_message.png"
        }
      ],
      "issues": [
        "Cannot test this scenario because the prerequisite (Save Page as Template) failed with server errors",
        "The Add Template feature requires existing templates for layout selection"
      ]
    },
    {
      "scenario_name": "Select different layout templates",
      "status": "FAIL",
      "steps": [
        {
          "step_number": 1,
          "action": "Attempt to access layout selection in Add Template form",
          "expected": "Should be able to select from available layout templates",
          "actual": "Cannot access layout selection because no templates exist in the system",
          "screenshot": "Create_New_Template_step04_templates_page_final.png"
        }
      ],
      "issues": [
        "Cannot test layout selection - no existing templates available due to server errors preventing template creation"
      ]
    },
    {
      "scenario_name": "Validate empty template name shows error",
      "status": "FAIL",
      "steps": [
        {
          "step_number": 1,
          "action": "Attempt to access Add Template form to test empty name validation",
          "expected": "Should be able to submit empty name and see validation error",
          "actual": "Cannot access the Add Template form because the system requires existing templates",
          "screenshot": "Create_New_Template_step01_no_templates_message.png"
        }
      ],
      "issues": [
        "Cannot test empty name validation - Add Template form inaccessible without existing templates"
      ]
    },
    {
      "scenario_name": "Validate script injection prevention in template name",
      "status": "FAIL",
      "steps": [
        {
          "step_number": 1,
          "action": "Attempt to access Add Template form to test XSS prevention",
          "expected": "Should be able to enter script tags and see them rejected/sanitized",
          "actual": "Cannot access the Add Template form because the system requires existing templates",
          "screenshot": "Create_New_Template_step01_no_templates_message.png"
        }
      ],
      "issues": [
        "Cannot test XSS prevention - Add Template form inaccessible without existing templates",
        "Code review shows hasScript validation exists in templatesCreateManager.js line 98-106"
      ]
    },
    {
      "scenario_name": "Cancel template creation",
      "status": "FAIL",
      "steps": [
        {
          "step_number": 1,
          "action": "Attempt to access Add Template form to test Cancel button",
          "expected": "Should be able to click Cancel and close form without saving",
          "actual": "Cannot access the Add Template form because the system requires existing templates",
          "screenshot": "Create_New_Template_step01_no_templates_message.png"
        }
      ],
      "issues": [
        "Cannot test Cancel functionality - Add Template form inaccessible without existing templates"
      ]
    },
    {
      "scenario_name": "Verify new template appears in list after creation",
      "status": "FAIL",
      "steps": [
        {
          "step_number": 1,
          "action": "Attempt to create a template and verify it appears in the list",
          "expected": "New template should appear in the templates list after creation",
          "actual": "Cannot create any templates due to Save Page as Template API returning 400 errors",
          "screenshot": "Create_New_Template_step04_templates_page_final.png"
        }
      ],
      "issues": [
        "Cannot verify template list update - no templates can be created due to server errors"
      ]
    },
    {
      "scenario_name": "API Error Handling - GetPageTemplates",
      "status": "FAIL",
      "steps": [
        {
          "step_number": 1,
          "action": "Navigate to Templates page and observe API calls",
          "expected": "GetPageTemplates API should return template data",
          "actual": "GetPageTemplates API returns HTTP 500 Internal Server Error consistently",
          "screenshot": "Create_New_Template_step04_templates_page_final.png"
        }
      ],
      "issues": [
        "GetPageTemplates API endpoint returns 500 Internal Server Error",
        "This prevents loading of any existing templates and causes 'error retrieving content' toast message"
      ]
    }
  ],
  "observations": [
    "The Templates feature has significant server-side issues that prevent proper testing",
    "GetPageTemplates API consistently returns HTTP 500 Internal Server Error",
    "SavePageAsTemplate API returns HTTP 400 Bad Request when attempting to save a page as a template",
    "The UI correctly handles the 'no templates' state by showing an appropriate message: 'You must save an existing page as a template prior to create a new template.'",
    "Code review of templatesCreateManager.js shows proper validation is implemented: required name field, script injection prevention (hasScript rule), and template selection requirement (needTemplate rule)",
    "The Add Template button is visible and clickable for users with Edit permissions",
    "The feature architecture requires at least one existing template (saved from a page) before new templates can be created using the Add Template functionality",
    "Error toast message 'There was an error retrieving your content. Please check your internet connection.' appears but the actual issue is server-side API failures, not network connectivity"
  ],
  "summary": {
    "total_scenarios": 10,
    "passed": 2,
    "failed": 8,
    "pass_rate": "20%"
  }
}
